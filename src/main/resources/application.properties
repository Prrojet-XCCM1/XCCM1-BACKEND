# ==============================================================
# CONFIGURATION GÉNÉRALE
# ==============================================================
spring.application.name=xccm1
server.port=${PORT:8082}
spring.profiles.active=prod

# ==============================================================
# BASE DE DONNÉES (PostgreSQL)
# ==============================================================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:xccm1}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ==============================================================
# JPA / HIBERNATE (Logs désactivés ici)
# ==============================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.open-in-view=false

# ==============================================================
# CONFIGURATION MAIL (Gmail SMTP SSL)
# ==============================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=465
spring.mail.username=${EMAIL_USERNAME}
spring.mail.password=${EMAIL_PASSWORD}

# Propriétés spécifiques pour SSL (Indispensable pour Render/Cloud)
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.starttls.enable=false

# Timeouts de sécurité
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ==============================================================
# GESTION DES LOGS (Silence Hibernate + Debug Mail)
# ==============================================================
# 1. Désactiver Hibernate
logging.level.org.hibernate=ERROR
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# 2. Activer les logs de Mail (Uniquement ce que vous voulez voir)
logging.level.org.springframework.mail=DEBUG
logging.level.com.sun.mail.smtp=DEBUG
spring.mail.properties.mail.debug=true

# ==============================================================
# SÉCURITÉ JWT
# ==============================================================
application.security.jwt.secret-key=${JWT_SECRET:ce4f01beeee4257f8ae44276369cd65974b8e114a9103cdc738f01c391a9b023}
application.security.jwt.expiration=${JWT_EXPIRATION:86400000}
application.security.jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ==============================================================
# AUTRES CONFIGURATIONS (JSON, Swagger, Files, Cache)
# ==============================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Europe/Paris

springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/docs

spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
file.upload-dir=${UPLOAD_DIR:./uploads}

spring.cache.type=redis
spring.cache.redis.time-to-live=3600000
spring.cache.redis.key-prefix=xccm: